<Window x:Class="CompHomp.BuildWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CompHomp"
        mc:Ignorable="d"
        Title="Создание сборки" 
        Height="800" 
        Width="1200"
        WindowStartupLocation="CenterScreen"
        Style="{StaticResource DefaultWindowStyle}">

    <Window.Resources>
        <!-- Стиль для темного ScrollViewer -->
        <Style x:Key="CustomScrollViewer" TargetType="{x:Type ScrollViewer}">
            <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="Background" Value="#1A1A1A"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ScrollViewer}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Border Background="Transparent" Grid.ColumnSpan="2"/>
                            <ScrollContentPresenter 
                                Grid.Column="0"
                                CanContentScroll="{TemplateBinding CanContentScroll}"
                                Margin="{TemplateBinding Padding}"/>
                            <ScrollBar 
                                Name="PART_VerticalScrollBar"
                                Grid.Column="1"
                                Orientation="Vertical"
                                Maximum="{TemplateBinding ScrollableHeight}"
                                ViewportSize="{TemplateBinding ViewportHeight}"
                                Value="{TemplateBinding VerticalOffset}"
                                Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                Background="#1A1A1A"
                                Foreground="#444444"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <ScrollViewer Style="{StaticResource CustomScrollViewer}" 
                  VerticalScrollBarVisibility="Auto"
                  HorizontalScrollBarVisibility="Disabled">
        <Grid Margin="20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <!-- Информационная панель -->
                <ColumnDefinition Width="2*"/>
                <!-- Основное содержимое -->
                <ColumnDefinition Width="1*"/>
                <!-- Изображение -->
            </Grid.ColumnDefinitions>

            <!-- Информационная панель -->
            <Grid x:Name="ComponentInfoPanel" 
                  Grid.Column="0" 
                  Width="300" 
                  Background="#2C2C2C" 
                  Margin="10">
                <StackPanel Margin="15">
                    <TextBlock Text="Характеристики компонента"
                             FontSize="18"
                             FontWeight="Bold"
                             Foreground="White"
                             Margin="0,0,0,15"/>
                             
                    <TextBlock x:Name="ComponentNameText" 
                             Text="Выберите компонент" 
                             FontSize="16" 
                             FontWeight="Bold" 
                             Foreground="White" 
                             Margin="0,0,0,10"/>

                    <TextBlock x:Name="ComponentDescriptionText" 
                             Text="Наведите курсор на компонент, чтобы увидеть его характеристики" 
                             TextWrapping="Wrap" 
                             Foreground="#CCCCCC" 
                             Margin="0,0,0,10"/>

                    <StackPanel x:Name="ComponentDetailsPanel">
                        <!-- Динамически заполняемые характеристики -->
                    </StackPanel>
                </StackPanel>
            </Grid>

            <!-- Основное содержимое -->
            <StackPanel Grid.Column="1" Margin="0,0,20,0">
                <TextBlock Text="Создание сборки" Style="{StaticResource HeaderText}"/>

                <StackPanel Margin="0,10">
                    <TextBlock Text="Название сборки" Style="{StaticResource LabelText}"/>
                    <TextBox x:Name="NameTextBox" Style="{StaticResource DefaultTextBox}"/>
                </StackPanel>

                <StackPanel Margin="0,10">
                    <TextBlock Text="Описание" Style="{StaticResource LabelText}"/>
                    <TextBox x:Name="DescriptionTextBox" 
                             Style="{StaticResource DefaultTextBox}" 
                             Height="100" 
                             TextWrapping="Wrap" 
                             AcceptsReturn="True" 
                             VerticalScrollBarVisibility="Auto"/>
                </StackPanel>

                <Grid Margin="0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Процессор" Style="{StaticResource LabelText}"/>
                    <ComboBox x:Name="CpuComboBox" 
                              Grid.Column="1" 
                              Style="{StaticResource DarkComboBoxStyle}"
                              DisplayMemberPath="Name"
                              SelectionChanged="Component_SelectionChanged"/>
                </Grid>
                <TextBlock x:Name="CpuPrice" Style="{StaticResource PriceText}" HorizontalAlignment="Right"/>

                <Grid Margin="0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Видеокарта" Style="{StaticResource LabelText}"/>
                    <ComboBox x:Name="GpuComboBox" 
                              Grid.Column="1" 
                              Style="{StaticResource DarkComboBoxStyle}"
                              DisplayMemberPath="Name"
                              SelectionChanged="Component_SelectionChanged"/>
                </Grid>
                <TextBlock x:Name="GpuPrice" Style="{StaticResource PriceText}" HorizontalAlignment="Right"/>

                <Grid Margin="0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Материнская плата" Style="{StaticResource LabelText}"/>
                    <ComboBox x:Name="MotherboardComboBox" 
                              Grid.Column="1" 
                              Style="{StaticResource DarkComboBoxStyle}"
                              DisplayMemberPath="Name"
                              SelectionChanged="Component_SelectionChanged"/>
                </Grid>
                <TextBlock x:Name="MotherboardPrice" Style="{StaticResource PriceText}" HorizontalAlignment="Right"/>

                <Grid Margin="0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Оперативная память" Style="{StaticResource LabelText}"/>
                    <ComboBox x:Name="RamComboBox" 
                              Grid.Column="1" 
                              Style="{StaticResource DarkComboBoxStyle}"
                              DisplayMemberPath="Name"
                              SelectionChanged="Component_SelectionChanged"/>
                </Grid>
                <TextBlock x:Name="RamPrice" Style="{StaticResource PriceText}" HorizontalAlignment="Right"/>

                <Grid Margin="0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Накопитель" Style="{StaticResource LabelText}"/>
                    <ComboBox x:Name="StorageComboBox" 
                              Grid.Column="1" 
                              Style="{StaticResource DarkComboBoxStyle}"
                              DisplayMemberPath="Name"
                              SelectionChanged="Component_SelectionChanged"/>
                </Grid>
                <TextBlock x:Name="StoragePrice" Style="{StaticResource PriceText}" HorizontalAlignment="Right"/>

                <Grid Margin="0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Блок питания" Style="{StaticResource LabelText}"/>
                    <ComboBox x:Name="PsuComboBox" 
                              Grid.Column="1" 
                              Style="{StaticResource DarkComboBoxStyle}"
                              DisplayMemberPath="Name"
                              SelectionChanged="Component_SelectionChanged"/>
                </Grid>
                <TextBlock x:Name="PsuPrice" Style="{StaticResource PriceText}" HorizontalAlignment="Right"/>

                <Grid Margin="0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Корпус" Style="{StaticResource LabelText}"/>
                    <ComboBox x:Name="CaseComboBox" 
                              Grid.Column="1" 
                              Style="{StaticResource DarkComboBoxStyle}"
                              DisplayMemberPath="Name"
                              SelectionChanged="Component_SelectionChanged"/>
                </Grid>
                <TextBlock x:Name="CasePrice" Style="{StaticResource PriceText}" HorizontalAlignment="Right"/>

                <Border Background="#FF2D2D2D" CornerRadius="5" Margin="0,15,0,5" Padding="10">
                    <StackPanel>
                        <TextBlock x:Name="PowerUsageText" 
                                  Text="Энергопотребление: 0Вт" 
                                  Foreground="White" 
                                  Margin="0,0,0,5"/>
                        <ProgressBar x:Name="PowerProgressBar" 
                                   Height="20" 
                                   Maximum="1000" 
                                   Value="0">
                            <ProgressBar.Style>
                                <Style TargetType="ProgressBar">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Value, RelativeSource={RelativeSource Self}}" Value="0">
                                            <Setter Property="Foreground" Value="#FF4CAF50"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Value, RelativeSource={RelativeSource Self}}" Value="800">
                                            <Setter Property="Foreground" Value="#FFFFEB3B"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Value, RelativeSource={RelativeSource Self}}" Value="900">
                                            <Setter Property="Foreground" Value="#FFF44336"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </ProgressBar.Style>
                        </ProgressBar>
                    </StackPanel>
                </Border>

                <TextBlock x:Name="TotalPriceText" 
                           FontSize="18"
                           FontWeight="Bold"
                           Foreground="#FF0078D4"
                           VerticalAlignment="Center"
                           Margin="0,20,0,10"/>
            </StackPanel>

            <!-- Панель изображения -->
            <StackPanel Grid.Column="2" Margin="0,10">
                <TextBlock Text="Изображение сборки" 
                          Style="{StaticResource LabelText}" 
                          Margin="0,0,0,10"/>
                
                <Border Background="#2C2C2C" 
                        BorderBrush="#444444" 
                        BorderThickness="1" 
                        CornerRadius="4"
                        Margin="0,0,0,10">
                    <Image x:Name="BuildImage" 
                           Height="300"
                           Stretch="Uniform"
                           Margin="10"/>
                </Border>

                <Button x:Name="SelectImage" 
                        Content="Выбрать изображение"
                        Style="{StaticResource DarkButtonStyle}"
                        Click="SelectImage_Click"
                        HorizontalAlignment="Stretch"
                        Margin="0,0,0,20"/>
            </StackPanel>

            <!-- Кнопки управления -->
            <StackPanel Grid.Column="1" Grid.ColumnSpan="2" 
                        Orientation="Horizontal" 
                        HorizontalAlignment="Right"
                        VerticalAlignment="Bottom"
                        Margin="0,20,0,0">
                <Button x:Name="CancelButton" Content="Отмена" Style="{StaticResource AdminActionButton}" Width="120" Height="40" Click="Cancel_Click" Margin="0,0,10,0"/>
                <Button x:Name="CreateButton" Content="Создать" Style="{StaticResource AdminActionButton}" Width="120" Height="40" Click="CreateBuild_Click"/>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</Window>
